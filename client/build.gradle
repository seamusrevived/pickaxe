import org.apache.tools.ant.taskdefs.condition.Os

task test(type:Exec) {
    environment "CI", "true"
    commandLine getYarnCmdForOs(), 'test'
}

task install(type:Exec){
    commandLine getYarnCmdForOs(), 'install'
}

task build(type:Exec) {
    dependsOn 'install'
    commandLine getYarnCmdForOs(), 'build'
}

private static String getYarnCmdForOs() {
    String yarn = 'yarn'
    if (Os.isFamily(Os.FAMILY_WINDOWS)) {
        yarn = 'yarn.cmd'
    }
    yarn
}
